{{ define "main" }}
<div class="container">
    <div class="filter-search-bar">
        <button class="filter-toggle" id="filterToggle" aria-label="{{ i18n "filter_toggle" }}">
            <span class="filter-toggle-icon"><i class="hover-pointer fa-solid fa-sliders" aria-hidden="true"></i></span>
            <span class="hover-pointer filter-toggle-text">{{ i18n "filter_toggle" }}</span>
        </button>
        
        <input type="search" 
               class="hover-pointer recipe-search" 
               id="recipeSearch" 
               placeholder="{{ i18n "search_placeholder" }}"
               aria-label="{{ i18n "search_label" }}">
    </div>
    
    <div class="filter-tray" id="filterTray">
        <div class="filter-tray-overlay" id="filterTrayOverlay"></div>
        <div class="filter-tray-panel">
            <div class="filter-tray-header">
                <h2 class="filter-tray-title">{{ i18n "filter_tray_title" }}</h2>
                <button class="filter-tray-close" id="filterTrayClose" aria-label="{{ i18n "filter_tray_close" }}">
                    <i class="hover-pointer fa-solid fa-xmark" aria-hidden="true"></i>
                </button>
            </div>
            <div class="filter-container">
                <div class="filter-group">
                    <h3 class="filter-label">{{ i18n "filter_category" }}</h3>
                    <div class="filter-buttons">
                        <button class="filter-btn active" data-filter-type="category" data-filter-value="all">{{ i18n "category_all" }}</button>
                        <button class="filter-btn" data-filter-type="category" data-filter-value="meal">{{ i18n "category_meal" }}</button>
                        <button class="filter-btn" data-filter-type="category" data-filter-value="snack">{{ i18n "category_snack" }}</button>
                        <button class="filter-btn" data-filter-type="category" data-filter-value="topping">{{ i18n "category_topping" }}</button>
                    </div>
                </div>
                
                <div class="filter-group">
                    <h3 class="filter-label">{{ i18n "filter_flavor" }}</h3>
                    <div class="filter-buttons">
                        <button class="filter-btn" data-filter-type="tag" data-filter-value="savory">{{ i18n "flavor_savory" }}</button>
                        <button class="filter-btn" data-filter-type="tag" data-filter-value="sweet">{{ i18n "flavor_sweet" }}</button>
                        <button class="filter-btn" data-filter-type="tag" data-filter-value="neutral">{{ i18n "flavor_neutral" }}</button>
                    </div>
                </div>
                
                <div class="filter-group">
                    <h3 class="filter-label">{{ i18n "filter_cooking_method" }}</h3>
                    <div class="filter-buttons">
                        <button class="filter-btn" data-filter-type="tag" data-filter-value="stovetop">{{ i18n "cooking_method_stovetop" }}</button>
                        <button class="filter-btn" data-filter-type="tag" data-filter-value="oven">{{ i18n "cooking_method_oven" }}</button>
                        <button class="filter-btn" data-filter-type="tag" data-filter-value="specialized">{{ i18n "cooking_method_specialized" }}</button>
                        <button class="filter-btn" data-filter-type="tag" data-filter-value="as-is">{{ i18n "cooking_method_as_is" }}</button>
                    </div>
                </div>
                
                <div class="filter-clear-container">
                    <button class="filter-clear-btn" id="filterClearBtn">
                        {{ i18n "filter_clear_all" }}
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="recipe-grid">
        {{ range where .Site.RegularPages "Type" "page" }}
        {{ if ne .File.LogicalName "_index.md" }}
        <a href="{{ .Permalink }}" class="recipe-card" 
           data-categories="{{ delimit .Params.categories "," }}"
           data-tags="{{ delimit .Params.tags "," }}">
            {{ if .Params.image }}
            <img src="{{ .Params.image | relURL }}" alt="{{ .Title }}" class="hover-pointer recipe-card-image">
            {{ else }}
            <div class="hover-pointer recipe-card-image" style="display: flex; align-items: center; justify-content: center; font-size: 3em;">
                <i class="hover-pointer fa-solid fa-utensils" aria-hidden="true"></i>
            </div>
            {{ end }}
            <div class="hover-pointer recipe-card-content">
                <h2 class="hover-pointer recipe-card-title">{{ .Title }}</h2>
                {{ if or .Params.prepTime .Params.cookTime }}
                <div class="hover-pointer recipe-card-meta">
                    {{ if .Params.prepTime }}<span class="hover-pointer"><i class="hover-pointer fa-regular fa-clock" aria-hidden="true"></i> {{ .Params.prepTime }}</span>{{ end }}
                    {{ if .Params.cookTime }}<span class="hover-pointer"><i class="hover-pointer fa-solid fa-fire-burner" aria-hidden="true"></i> {{ .Params.cookTime }}</span>{{ end }}
                </div>
                {{ end }}
            </div>
        </a>
        {{ end }}
        {{ end }}
    </div>
</div>
{{ end }}
